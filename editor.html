<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ã‰diteur de Niveaux - Miner Quest</title>
    <link rel="stylesheet" href="css/editor.css">
</head>
<body>
    <!-- Input cachÃ© pour charger des fichiers -->
    <input type="file" id="file-input" accept=".json" style="display: none;">

    <div class="editor-container">
        <div class="editor-header">
            <h1>âœ’ï¸ Ã‰diteur de Niveaux</h1>
            <div class="editor-actions">
                <div id="editor-status" class="editor-status"></div>
                <button id="btn-undo">â†¶ Annuler</button>
                <button id="btn-new">Nouveau</button>
                <button id="btn-load">ğŸ“ Charger fichier</button>
                <button id="btn-save">Sauvegarder</button>
                <button id="btn-tiles">ğŸ¨ Tuiles</button>
                <button id="btn-test">Tester</button>
                <button id="btn-back">Retour au jeu</button>
            </div>
        </div>

        <div class="editor-content">
            <div class="sidebar sidebar-left">
                <h3>Palette de Tuiles</h3>
                <div id="tile-palette" class="tile-palette"></div>
            </div>

            <div class="editor-main">
                <canvas id="editorCanvas" width="512" height="512"></canvas>
                <p class="editor-info">Cliquez sur une tuile dans la palette, puis sur la grille pour placer</p>
            </div>

            <div class="sidebar sidebar-right">
                <div class="level-properties">
                    <h3>PropriÃ©tÃ©s du Niveau</h3>
                    <label>
                        Nom du niveau:
                        <input type="text" id="level-name" value="level_1">
                    </label>
                    <label>
                        Position X joueur:
                        <input type="number" id="start-x" value="8" min="0" max="15">
                    </label>
                    <label>
                        Position Y joueur:
                        <input type="number" id="start-y" value="8" min="0" max="15">
                    </label>
                    <button id="btn-set-player-pos" class="btn-action">ğŸ“ DÃ©finir position du joueur</button>
                </div>

                <div class="level-list">
                    <h3>Niveaux</h3>
                    <select id="level-select" size="5"></select>
                    <button id="btn-delete-level" class="btn-danger">ğŸ—‘ï¸ Supprimer niveau</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal d'Ã©dition de coffre -->
    <div id="modal-edit-chest" class="modal-editor">
        <div class="modal-editor-content">
            <h2>ğŸ“¦ Contenu du coffre</h2>
            <p style="margin-bottom: 16px; color: #aaa;">Ajustez les quantitÃ©s d'items</p>
            <div id="chest-editor-items">
                <div class="chest-editor-item">
                    <div class="chest-item-label">
                        <span class="chest-item-icon" style="background: #7a7a7a;">ğŸª¨</span>
                        <span>Pierre</span>
                    </div>
                    <span class="chest-item-value" id="chest-stone-value">0</span>
                    <div class="chest-item-controls">
                        <button class="btn-decrement" data-type="stone">-</button>
                        <button class="btn-increment" data-type="stone">+</button>
                    </div>
                </div>
                <div class="chest-editor-item">
                    <div class="chest-item-label">
                        <span class="chest-item-icon" style="background: #b87333;">âš™ï¸</span>
                        <span>Fer</span>
                    </div>
                    <span class="chest-item-value" id="chest-iron-value">0</span>
                    <div class="chest-item-controls">
                        <button class="btn-decrement" data-type="iron">-</button>
                        <button class="btn-increment" data-type="iron">+</button>
                    </div>
                </div>
                <div class="chest-editor-item">
                    <div class="chest-item-label">
                        <span class="chest-item-icon" style="background: #ffd700;">â­</span>
                        <span>Or</span>
                    </div>
                    <span class="chest-item-value" id="chest-gold-value">0</span>
                    <div class="chest-item-controls">
                        <button class="btn-decrement" data-type="gold">-</button>
                        <button class="btn-increment" data-type="gold">+</button>
                    </div>
                </div>
            </div>
            <div style="display: flex; gap: 8px; margin-top: 16px;">
                <button id="btn-save-chest" class="btn-action" style="flex: 1;">Sauvegarder</button>
                <button id="btn-cancel-chest" class="btn-danger" style="flex: 1;">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal d'Ã©dition de panneau -->
    <div id="modal-edit-sign" class="modal-editor">
        <div class="modal-editor-content">
            <h2>ğŸª§ Message du panneau</h2>
            <p style="margin-bottom: 16px; color: #aaa;">Ã‰crivez le message Ã  afficher</p>
            <textarea id="sign-message-input" rows="5" style="width: 100%; padding: 10px; background: #3c3c3c; border: 1px solid #3e3e42; color: #cccccc; border-radius: 4px; font-size: 14px; font-family: inherit; resize: vertical;"></textarea>
            <div style="display: flex; gap: 8px; margin-top: 16px;">
                <button id="btn-save-sign" class="btn-action" style="flex: 1;">Sauvegarder</button>
                <button id="btn-cancel-sign" class="btn-danger" style="flex: 1;">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal d'Ã©dition de warp -->
    <div id="modal-edit-warp" class="modal-editor">
        <div class="modal-editor-content">
            <h2 id="warp-modal-title">ğŸŒ€ Destination du warp</h2>
            <p style="margin-bottom: 16px; color: #aaa;">SÃ©lectionnez le niveau de destination</p>
            <select id="warp-level-select" style="width: 100%; padding: 10px; background: #3c3c3c; border: 1px solid #3e3e42; color: #cccccc; border-radius: 4px; font-size: 14px;">
            </select>
            <div style="display: flex; gap: 8px; margin-top: 16px;">
                <button id="btn-save-warp" class="btn-action" style="flex: 1;">Sauvegarder</button>
                <button id="btn-cancel-warp" class="btn-danger" style="flex: 1;">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal de crÃ©ation de niveau -->
    <div id="modal-new-level" class="modal-editor">
        <div class="modal-editor-content">
            <h2>âœ¨ CrÃ©er un nouveau niveau</h2>
            
            <label style="display: block; margin-top: 16px; margin-bottom: 8px; color: #cccccc;">
                Type de niveau:
            </label>
            <select id="new-level-type" style="width: 100%; padding: 10px; background: #3c3c3c; border: 1px solid #3e3e42; color: #cccccc; border-radius: 4px; font-size: 14px; margin-bottom: 16px;">
                <option value="topdown">Top-Down (Vue du dessus)</option>
                <option value="platformer">Platformer (Vue de cÃ´tÃ©)</option>
            </select>
            
            <div style="display: flex; gap: 16px; margin-bottom: 16px;">
                <label style="flex: 1;">
                    Largeur (tuiles):
                    <input type="number" id="new-level-width" value="16" min="8" max="32" style="width: 100%; padding: 8px; background: #3c3c3c; border: 1px solid #3e3e42; color: #cccccc; border-radius: 4px; margin-top: 4px;">
                </label>
                <label style="flex: 1;">
                    Hauteur (tuiles):
                    <input type="number" id="new-level-height" value="16" min="8" max="32" style="width: 100%; padding: 8px; background: #3c3c3c; border: 1px solid #3e3e42; color: #cccccc; border-radius: 4px; margin-top: 4px;">
                </label>
            </div>
            
            <div style="display: flex; gap: 8px; margin-top: 16px;">
                <button id="btn-create-new-level" class="btn-action" style="flex: 1;">CrÃ©er</button>
                <button id="btn-cancel-new-level" class="btn-danger" style="flex: 1;">Annuler</button>
            </div>
        </div>
    </div>

    <script src="js/tiles.js"></script>
    <script src="js/level.js"></script>
    <script src="js/tile_editor.js"></script>
    <script src="js/editor.js"></script>
</body>
</html>
